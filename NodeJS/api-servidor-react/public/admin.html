<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administrator Panel</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/index.css">
</head>
<body class="bg-primary-custom position-relative">
    <div class="border-top-body position-fixed top-0 w-100"></div>
    <header class="Header container-fluid mx-auto">
        <div class="d-flex justify-content-between align-items-center py-3">
            <div class="d-flex align-items-center justify-content-center gap-4">
                <button class="bg-transparent" id="btnDropdownMenuDashboard">
                    <i class="bi bi-list-ul text-white fs-3"></i>
                </button>
                <button class="bg-transparent d-none position-fixed scrollBtnMenu btnMenuDashboardScroll" id="btnDropdownMenuDashboard">
                    <i class="bi bi-list-ul color2 fs-3"></i>
                </button>
                <h3 class="text-uppercase fs-6 fw-normal text-white lh-1 mb-0">Dashboard</h3>
            </div>
            <div class="settings d-flex align-items-start">
                <div class="d-flex align-items-center">
                    <a class="bg-transparent lh-1 pe-auto">
                        <i class="bi bi-search text-white fs-5"></i>
                    </a>
                    <a class="bg-transparent mx-5 lh-1 pe-auto">
                        <i class="bi bi-soundwave text-white fs-5"></i>
                    </a>
                </div>
                <div class="dropdown">
                    <button class="d-flex align-items-center gap-2 bg-transparent" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="/img/mike.jpg" class="avatar-dash rounded-circle" />
                        <i class="bi bi-caret-down-fill text-white fs-custom-arrow"></i>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item drop-user-admin-custom text-uppercase fw-semibold" href="#">Profile</a></li>
                        <li><a class="dropdown-item drop-user-admin-custom text-uppercase fw-semibold" href="#">Setting</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item drop-user-admin-custom text-uppercase fw-semibold" href="#" id="logoutBtn">Log out</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>
    <section class="Principal-contenedor container-fluid mx-auto row justify-content-md-center overflow-y-hidden">
        <div class="Menu-dashboard">
            <div class="d-flex flex-column align-items-center gap-4 overflow-hidden effect-menu">
                <a href="/admin" class="bg-transparent rounded-circle btn-menu d-flex gap-3 justify-content-center align-items-center position-relative" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="Home">
                    <i class="bi bi-house-fill lh-1 fs-4 p-1 text-white"></i>
                    <p class="position-absolute text-white">Home</p>
                </a>
                <a href="/profile" class="bg-transparent rounded-circle btn-menu d-flex gap-3 justify-content-center align-items-center position-relative" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="Profile">
                    <i class="bi bi-person-fill lh-1 fs-4 p-1 text-white"></i>
                    <p class="position-absolute text-white">Profile</p>
                </a>
                <a href="/tasks" class="bg-transparent rounded-circle btn-menu d-flex gap-3 justify-content-center align-items-center position-relative" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-title="Tasks">
                    <i class="bi bi-list-task lh-1 fs-4 p-1 text-white"></i>
                    <p class="position-absolute text-white">Tasks</p>
                </a>
                <a href="/animals" class="bg-transparent rounded-circle btn-menu d-flex gap-3 justify-content-center align-items-center position-relative">
                    <i class="bi bi-backpack-fill lh-1 fs-4 p-1 text-white"></i>
                    <p class="position-absolute text-white">Animals</p>
                </a>
                <a class="bg-transparent rounded-circle btn-menu d-flex gap-3 justify-content-center align-items-center position-relative">
                    <i class="bi bi-bell lh-1 fs-4 p-1 text-white"></i>
                    <p class="position-absolute text-white">item !!!!</p>
                </a>
                <a class="bg-transparent rounded-circle btn-menu d-flex gap-3 justify-content-center align-items-center position-relative">
                    <i class="bi bi-bicycle lh-1 fs-4 p-1 text-white"></i>
                    <p class="position-absolute text-white">item !!!!</p>
                </a>
            </div>
        </div>
        <div class="Content-dashboard">
            <div class="row gap-3">
                <div class="row gap-3">
                    <div class="col bg-op-cards d-flex flex-wrap px-3 py-2">
                        <div class="leftCardDash">
                            <span class="bg-linear-card-dash1 d-inline-block">
                                <i class="bi bi-chat text-white fs-3 lh-1"></i>
                            </span>
                        </div>
                        <div class="rightCardDash d-flex d-flex flex-column align-items-end">
                            <span class="rightCardDash-title">Number</span>
                            <p class="rightCardDash-subtitle fs-4 mb-0 lh-1 text-uppercase">150GB</p>
                        </div>
                        <p class="bottomCardDash d-flex align-items-end mt-5 mb-0">
                            <i class="bi bi-arrow-clockwise"></i>
                            <span>Update Now</span>
                        </p>
                    </div>

                    <div class="col bg-op-cards d-flex flex-wrap px-3 py-2">
                        <div class="leftCardDash">
                            <span class="bg-linear-card-dash1 d-inline-block">
                                <i class="bi bi-star text-white fs-3 lh-1"></i>
                            </span>
                        </div>
                        <div class="rightCardDash d-flex d-flex flex-column align-items-end">
                            <span class="rightCardDash-title">Number</span>
                            <p class="rightCardDash-subtitle fs-4 mb-0 lh-1 text-uppercase">150GB</p>
                        </div>
                        <p class="bottomCardDash d-flex align-items-end mt-5 mb-0">
                            <i class="bi bi-soundwave"></i>
                            <span>Update Now</span>
                        </p>
                    </div>

                    <div class="col bg-op-cards d-flex flex-wrap px-3 py-2">
                        <div class="leftCardDash">
                            <span class="bg-linear-card-dash1 d-inline-block">
                                <i class="bi bi-person text-white fs-3 lh-1"></i>
                            </span>
                        </div>
                        <div class="rightCardDash d-flex d-flex flex-column align-items-end">
                            <span class="rightCardDash-title">Number</span>
                            <p class="rightCardDash-subtitle fs-4 mb-0 lh-1 text-uppercase">150GB</p>
                        </div>
                        <p class="bottomCardDash d-flex align-items-end mt-5 mb-0">
                            <i class="bi bi-trophy"></i>
                            <span>Update Now</span>
                        </p>
                    </div>


                    <div class="col bg-op-cards d-flex flex-wrap px-3 py-2">
                        <div class="leftCardDash">
                            <span class="bg-linear-card-dash1 d-inline-block">
                                <i class="bi bi-bug text-white fs-3 lh-1"></i>
                            </span>
                        </div>
                        <div class="rightCardDash d-flex d-flex flex-column align-items-end">
                            <span class="rightCardDash-title">Number</span>
                            <p class="rightCardDash-subtitle fs-4 mb-0 lh-1 text-uppercase">150GB</p>
                        </div>
                        <p class="bottomCardDash d-flex align-items-end mt-5 mb-0">
                            <i class="bi bi-watch"></i>
                            <span>Update Now</span>
                        </p>
                    </div>

                </div>
                <div class="row gap-3">
                    <div class="col bg-op-cards p-3">
                        <div class="d-flex flex-column align-items-start gap-2 mb-3">
                            <span class="rightCardDash-title">Total Shipments</span>
                            <div class="d-flex align-items-center gap-3">
                                <i class="bi bi-bell color2 fs-6"></i>
                                <p class="fs-4 mb-0 lh-1 text-uppercase text-white">763,215</p>
                            </div>
                        </div>
                        <div class="row">
                            <canvas id="mychartLine" class="col"></canvas>
                        </div>
                    </div>
                    <div class="col bg-op-cards p-3">
                        <div class="d-flex flex-column align-items-start gap-2 mb-3">
                            <span class="rightCardDash-title">Total Shipments</span>
                            <div class="d-flex align-items-center gap-3">
                                <i class="bi bi-truck color4 fs-6"></i>
                                <p class="fs-4 mb-0 lh-1 text-uppercase text-white">763,215</p>
                            </div>
                        </div>
                        <div class="row">
                            <canvas id="mychartBars" class="col"></canvas>
                        </div>
                    </div>
                    <div class="col bg-op-cards p-3">
                        <div class="d-flex flex-column align-items-start gap-2 mb-3">
                            <span class="rightCardDash-title">Total Shipments</span>
                            <div class="d-flex align-items-center gap-3">
                                <i class="bi bi-send color3 fs-6"></i>
                                <p class="fs-4 mb-0 lh-1 text-uppercase text-white">763,215</p>
                            </div>
                        </div>
                        <div class="row">
                            <canvas id="mychartLine2" class="col"></canvas>
                        </div>
                    </div>
                </div>
                <div class="row gap-3">
                    <div class="col bg-op-cards pt-3 pb-4">
                        <table class="table-tasks w-100 overflow-y-auto" style="max-height: 200px;">
                            <thead>
                                <tr>
                                    <td class="px-2 fw-light text-uppercase text-white fs-7">tasks(5)</td>
                                    <td class="px-2 fw-light text-uppercase white2 fs-7">Today</td>
                                    <td class="px-2">
                                        <div class="dropdown">
                                            <button class="bg-transparent btnWhite2" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                <div class="d-flex align-items-center">
                                                    <i class="bi bi-gear white2"></i>
                                                    <i class="bi bi-caret-down-fill fs-custom-arrow white2"></i>
                                                </div>
                                            </button>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item drop-user-admin-custom text-uppercase fw-semibold" href="#">Action</a></li>
                                                <li><a class="dropdown-item drop-user-admin-custom text-uppercase fw-semibold" href="#">
                                                Another action</a></li>
                                                <li><a class="dropdown-item drop-user-admin-custom text-uppercase fw-semibold" href="#">Something else</a></li>
                                            </ul>
                                        </div>
                                    </td>
                                </tr>
                            </thead>
                            <tbody id="tbody-tasks"></tbody>
                        </table>
                    </div>
                    <div class="col-md-7  bg-op-cards pt-3 pb-4">
                        <table class="table-user w-100">
                            <thead>
                                <tr class="border-bottom-table">
                                    <td class="text-center text-uppercase fs-6 fw-bold white2 py-2">#</td>
                                    <td class="text-uppercase fs-7 fw-bold white2 px-3 py-2">Name</td>
                                    <td class="text-uppercase fs-7 fw-bold white2 py-2">Job Position</td>
                                    <td class="text-center text-uppercase fs-7 fw-bold white2 py-2">Milestone</td>
                                    <td class="text-center text-uppercase fs-7 fw-bold white2 py-2">Salary</td>
                                    <td class="text-center text-uppercase fs-7 fw-bold white2 py-2">Actions</td>
                                </tr>
                            </thead>
                            <tbody id="table-tbody"> </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- <div class="container header">
        <h1>Administrator Panel</h1>
        <div>
            <a href="/admin/crear-usuario" class="btnCreateU">+ Crear Usuario</a>
            <button id="logoutBtn" class="btnLogout">Logout</button>
        </div>
    </div>

    <div class="container">
        <h2>Users Veterinary</h2>
        <ul id="ulClientVets"></ul>

        <h2>Users Client</h2>
        <ul id="ulClientUsers"></ul>
    </div> -->
</body>
    <script src="/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="/js/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
        const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    </script>
    <script>
        const logoutBtn = document.querySelector("#logoutBtn");
        const ulClientVets = document.querySelector("#ulClientVets");
        const ulClientUsers = document.querySelector("#ulClientUsers");
        const btnCreateU = document.querySelector("#btnCreateU")

        //extraigo el token de localStorage
        const token = localStorage.getItem("token");
        //verifico que exista el token
        if(!token){
            //si no existe lo redirijo a login
            window.location.href = "/login";
        }

        //codigo para cerrar sesion
        logoutBtn.addEventListener("click", () => {
            //borramos token y redirijimos a login
            localStorage.removeItem("token");
            localStorage.removeItem("userIn");
            window.location.href = "/login";
        });
        /*const getUsers = async () => {
            try {
                //realizamos la peticion a la api
                const {data} = await axios.get("/api/users", {
                    headers: {
                        //por headers pasamos el token por authorization
                        Authorization: `Bearer ${token}`
                    }
                });

                //el arreglo de users lo asignamos a una variable users
                const { msg: users } = data;
                console.log(users)

                //vaciamos el html de los contenedores
                ulClientUsers.textContent = "";
                ulClientVets.textContent = "";


                users.forEach(user => {
                    if(user.roleId === 1) return;


                    const li = document.createElement("LI");
                    li.textContent = user.username;
                    //Si son usuarios normales
                    if(user.roleId === 3){
                        const button = document.createElement("BUTTON");
                        button.classList.add("upVet")
                        button.textContent = "Promover a Veterinario";
                        button.addEventListener("click", async () => {
                            if(!confirm("¿Estas seguro de que quieres promover este usuario a veterinario?")){
                                return;
                            }

                            try {
                                const {data} = await axios.put(`/api/update-rol-user/${user.uid}`,{rol: 2}, {
                                    headers: {
                                        Authorization: `Bearer ${token}`
                                    }
                                });

                                //Solo pasa cuando presiono el boton, por eso no se vuelve un ciclo
                                getUsers();
                            } catch (error) {
                                console.log(error);
                            }
                        });
                        li.appendChild(button);
                        ulClientUsers.appendChild(li);
                        return;
                    }

                    //Si son veterinarios
                    const btnVet = document.createElement("BUTTON");
                    btnVet.classList.add("upVet");
                    btnVet.textContent = "Dar de baja";
                    btnVet.addEventListener("click", async (e) => {
                        if(!confirm("¿Estas seguro de realizar esta accion?")){
                            return;
                        }

                        try {
                            const {data} = await axios.put(`/api/update-rol-user/${user.uid}`,{rol: 3}, {
                                headers: {
                                    Authorization: `Bearer ${token}`
                                }
                            });

                            //Solo pasa cuando presiono el boton, por eso no se vuelve un ciclo
                            getUsers();
                        } catch (error) {
                            console.log(error)
                        }
                    });
                    li.appendChild(btnVet)
                    ulClientVets.appendChild(li)
                });
            } catch (error) {
                console.log(error);
            }
        }
        getUsers();*/
    </script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/admin/index.js"></script>
</html>